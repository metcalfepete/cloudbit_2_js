<!DOCTYPE html>
<html>
<body>
<h1 id='title'>Cloudbit Status Monitor</h1>
<h2>
Label : <font color='red' id='LB_label'></font><br>
Is Connected : <font color='red' id='is_connected'></font><br>
</h2>
 
<script>

var xhttp = new XMLHttpRequest();
// change the authtoken to match your settings
var authtoken = "4f3830b44e1d4b27xxxxxxxxxxx8cff5d45331c75006025fa0dc9";
var theURL =  "https://api-http.littlebitscloud.cc/devices/";
xhttp.open("GET", theURL, true);
xhttp.setRequestHeader("Accept","application/vnd.littlebits.v2+json");
xhttp.setRequestHeader("Authorization", "Bearer " + authtoken);

xhttp.onreadystatechange = function() {

	if (xhttp.readyState == 4 ) { // when the response is complete get the data
		// remove leading "[" and trailing ']'
		var theresponse = xhttp.responseText.substring(1, xhttp.responseText.length -1);
		var lb_data = JSON.parse( theresponse );	
		
		document.getElementById('LB_label').innerText =  lb_data.label;
		document.getElementById('is_connected').innerHTML = lb_data.is_connected;
	}
}

xhttp.send();

</script>

</body>
</html>